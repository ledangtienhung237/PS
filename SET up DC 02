
# üß± Setup DC02 ‚Äì Secondary Domain Controller (Runbook)

## üéØ Goal

Tri·ªÉn khai **DC02** l√†m **Secondary Domain Controller** cho domain `hunter-audio.com` v·ªõi:

* DNS replication
* GC / KDC
* AD health chu·∫©n enterprise

---

## 1Ô∏è‚É£ Network Baseline (B·∫ÆT BU·ªòC)

**WHY:** DC ph·∫£i locate domain qua AD DNS, kh√¥ng d√πng Azure DNS.

```powershell
# Set DNS v·ªÅ DC01
$nic = Get-NetAdapter | Where-Object { $_.Status -eq "Up" }
Set-DnsClientServerAddress -InterfaceIndex $nic.InterfaceIndex -ServerAddresses "10.160.17.4"

# Disable IPv6 (lab best practice)
Disable-NetAdapterBinding -Name $nic.Name -ComponentID ms_tcpip6

ipconfig /flushdns
Restart-Computer
```

‚úÖ Expected:

```
DNS Servers : 10.160.17.4
Primary DNS Suffix : (blank)
```

---

## 2Ô∏è‚É£ Join DC02 v√†o Domain

```powershell
Add-Computer -DomainName hunter-audio.com -Restart
```

Verify:

```powershell
systeminfo | findstr /i domain
```

---

## 3Ô∏è‚É£ C√†i AD DS Role

```powershell
Install-WindowsFeature AD-Domain-Services -IncludeManagementTools
```

---

## 4Ô∏è‚É£ Promote DC02 th√†nh Domain Controller

**NOTE:** Ph·∫£i d√πng **Domain Admin** (`hunter-audio\hunter`).

```powershell
Install-ADDSDomainController `
-DomainName "hunter-audio.com" `
-InstallDns `
-Credential (Get-Credential) `
-NoGlobalCatalog:$false
```

* Nh·∫≠p Domain Admin credential
* T·∫°o **DSRM password**
* Ch·ªçn **Yes to All**
* M√°y **t·ª± reboot** = PROMOTE OK

---

## 5Ô∏è‚É£ Post-Promotion Verification (KH√îNG B·ªé QUA)

### DC discovery

```powershell
nltest /dsgetdc:hunter-audio.com
```

### Replication

```powershell
repadmin /replsummary
```

Expected: `fails = 0`

### AD health

```powershell
dcdiag /e /v
```

Expected: no DNS / NetLogon / Advertising errors

---

## ‚úÖ Result

* DC02 = GC + KDC + DNS
* Replication DC01 ‚Üî DC02 OK
* Domain & Forest healthy
* Ready for **PKI / AADC / ADFS / NPS**

---


